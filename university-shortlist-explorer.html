<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Shortlist Explorer - Sophia's AI/Data Science Programs</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        const universities = [
            // GERMANY
            { id: 1, name: "University of Passau", country: "Germany", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Match", fitScore: 5, citySize: "50k", highlights: ["Dedicated AI program", "English-taught", "Small city charm", "Native German advantage"], new: false, url: "https://www.uni-passau.de/en/bachelor-artificial-intelligence/" },
            { id: 2, name: "University of Bayreuth", country: "Germany", program: "BSc Data Science & AI", language: "English", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Match", fitScore: 5, citySize: "75k", highlights: ["Data Science focus", "English-taught", "Research-oriented"], new: false, url: "https://www.uni-bayreuth.de/en/study/degree-programs/bsc-data-science" },
            { id: 3, name: "TH Deggendorf", country: "Germany", program: "BSc Applied AI", language: "English", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Safety", fitScore: 4, citySize: "35k", highlights: ["Applied/practical focus", "English-taught", "Easy admission"], new: false, url: "https://www.th-deg.de/en/applied-ai-b-sc" },
            { id: 4, name: "Saarland University", country: "Germany", program: "BSc CS + AI", language: "English", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Match", fitScore: 4, citySize: "180k", highlights: ["Strong CS + AI", "Research excellence", "French border"], new: false, url: "https://www.uni-saarland.de/en/study/programmes/bachelor/computer-science.html" },
            { id: 5, name: "University of T√ºbingen", country: "Germany", program: "BSc Computer Science", language: "German-heavy", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Reach", fitScore: 3, citySize: "90k", highlights: ["Prestigious", "Strong research", "Requires German"], new: false, url: "https://uni-tuebingen.de/en/faculties/faculty-of-science/departments/computer-science/studies/degree-programs/computer-science-bsc/" },
            
            // NETHERLANDS
            { id: 6, name: "Maastricht University", country: "Netherlands", program: "BSc Data Science & AI", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Match", fitScore: 5, citySize: "120k", highlights: ["Problem-based learning", "International environment", "Border city"], new: false, url: "https://www.maastrichtuniversity.nl/education/bachelor/data-science-and-artificial-intelligence" },
            { id: 7, name: "VU Amsterdam", country: "Netherlands", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Reach", fitScore: 5, citySize: "900k", highlights: ["Top-tier AI program", "Amsterdam lifestyle", "Research excellence"], new: false, url: "https://vu.nl/en/education/bachelor/artificial-intelligence" },
            { id: 8, name: "University of Groningen", country: "Netherlands", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Safety", fitScore: 4, citySize: "230k", highlights: ["Student city", "Accessible admission", "Good AI program"], new: false, url: "https://www.rug.nl/bachelors/artificial-intelligence/" },
            { id: 9, name: "Leiden University", country: "Netherlands", program: "BSc Data Science & AI", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Match", fitScore: 5, citySize: "125k", highlights: ["Oldest Dutch university", "Near The Hague", "Data Science focus"], new: false, url: "https://www.universiteitleiden.nl/en/education/study-programmes/bachelor/data-science-and-artificial-intelligence" },
            { id: 10, name: "Breda University", country: "Netherlands", program: "BSc Applied Data Science & AI", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Safety", fitScore: 4, citySize: "185k", highlights: ["Applied focus", "Gaming/creative industries", "Practical approach"], new: false, url: "https://www.buas.nl/en/programmes/applied-data-science-and-artificial-intelligence" },
            { id: 11, name: "Zuyd University", country: "Netherlands", program: "BSc Applied Data Science & AI", language: "English", cost: "‚Ç¨80-87k", costMin: 80000, costMax: 87000, classification: "Safety", fitScore: 4, citySize: "120k", highlights: ["Applied sciences", "Maastricht area", "Practical training"], new: false, url: "https://www.zuyd.nl/en/study/bachelor/applied-data-science-and-ai" },
            
            // SPAIN
            { id: 12, name: "UPM Madrid", country: "Spain", program: "BSc Data Science & AI", language: "Spanish", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Reach", fitScore: 5, citySize: "3.2M", highlights: ["Top Spanish tech", "Capital city", "C1 Spanish advantage"], new: false, url: "https://www.upm.es/Estudiantes/Estudios_Titulaciones/EstudiosOficiales?id=1802&fmt=detail" },
            { id: 13, name: "UC3M Madrid", country: "Spain", program: "BSc Data Science & Engineering", language: "Spanish/English", cost: "‚Ç¨55-65k", costMin: 55000, costMax: 65000, classification: "Match/Reach", fitScore: 5, citySize: "3.2M", highlights: ["Excellent reputation", "Bilingual option", "New AI program 2025"], new: false, url: "https://www.uc3m.es/bachelor-degree/data-science" },
            { id: 14, name: "University of Barcelona", country: "Spain", program: "BSc Data Science", language: "Spanish/Catalan", cost: "‚Ç¨48-55k", costMin: 48000, costMax: 55000, classification: "Match", fitScore: 4, citySize: "1.6M", highlights: ["Barcelona location", "Data Science", "Catalan consideration"], new: false, url: "https://www.ub.edu/web/portal/en/estudis/oferta-formativa/graus/fitxa/G1G0M1013/" },
            { id: 15, name: "University of Valencia", country: "Spain", program: "BSc Data Science", language: "Spanish", cost: "‚Ç¨40-48k", costMin: 40000, costMax: 48000, classification: "Match", fitScore: 4, citySize: "800k", highlights: ["Mediterranean coast", "Affordable", "C1 Spanish advantage"], new: false, url: "https://www.uv.es/uvweb/college/en/undergraduate-degree/undergraduate-degrees/undergraduate-degree-data-science-1285846094474/Titulacio.html" },
            { id: 16, name: "UPC Barcelona", country: "Spain", program: "BSc CS (AI/Data)", language: "Spanish/Catalan", cost: "‚Ç¨48-55k", costMin: 48000, costMax: 55000, classification: "Reach", fitScore: 4, citySize: "1.6M", highlights: ["Strong engineering", "Barcelona tech hub", "Catalan required"], new: false, url: "https://www.fib.upc.edu/en/studies/bachelors-degrees" },
            { id: 17, name: "IE University", country: "Spain", program: "BSc CS & AI", language: "English", cost: "‚Ç¨100k+", costMin: 100000, costMax: 120000, classification: "Reach", fitScore: 3, citySize: "Madrid", highlights: ["Private/expensive", "Business focus", "International"], new: false, url: "https://www.ie.edu/university/studies/academic-programs/bachelor-computer-science-artificial-intelligence/" },
            { id: 18, name: "UPNA Pamplona", country: "Spain", program: "BSc Computer Science", language: "English", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Safety", fitScore: 5, citySize: "200k", highlights: ["English-taught!", "Excellent value", "Basque Country", "Guaranteed safety"], new: false, url: "https://www.unavarra.es/sites/grados/informatica.html" },
            { id: 19, name: "UPV Valencia", country: "Spain", program: "BSc Data Science", language: "Spanish/English", cost: "‚Ç¨48-56k", costMin: 48000, costMax: 56000, classification: "Match", fitScore: 5, citySize: "800k", highlights: ["Bilingual program", "Data Science focus", "Great city", "Good value"], new: false, url: "https://www.upv.es/titulaciones/GCD/index-en.html" },
            { id: 20, name: "UAB Barcelona", country: "Spain", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨68-70k", costMin: 68000, costMax: 70000, classification: "Reach", fitScore: 5, citySize: "1.6M", highlights: ["Only English AI in Barcelona", "Competitive", "Research university"], new: false, url: "https://www.uab.cat/web/estudiar/official-undergraduate-degrees/general-information/artificial-intelligence-1345467765430.html" },
            { id: 21, name: "TECNUN San Sebasti√°n", country: "Spain", program: "BSc AI Engineering", language: "Bilingual", cost: "‚Ç¨60-70k", costMin: 60000, costMax: 70000, classification: "Reach", fitScore: 4, citySize: "185k", highlights: ["Private university", "Engineering focus", "Basque Country"], new: false, url: "https://www.tecnun.es/en/bachelor-degree-artificial-intelligence" },
            { id: 22, name: "Universidad de Zaragoza", country: "Spain", program: "BSc Computer Science", language: "Spanish", cost: "‚Ç¨40-45k", costMin: 40000, costMax: 45000, classification: "Safety", fitScore: 3.5, citySize: "675k", highlights: ["Affordable", "Traditional program", "C1 Spanish advantage"], new: false, url: "https://estudios.unizar.es/estudio/ver?id=148" },
            
            // BELGIUM
            { id: 23, name: "KdG Antwerp", country: "Belgium", program: "BSc Applied CS (AI Specialization)", language: "English", cost: "‚Ç¨34-38k", costMin: 34000, costMax: 38000, classification: "Safety/Match", fitScore: 5, citySize: "500k", highlights: ["Super affordable", "English-taught", "Practical focus", "Cool city"], new: false, url: "https://www.kdg.be/en/applied-computer-science" },
            
            // FRANCE
            { id: 24, name: "PSL Paris", country: "France", program: "International BSc in AI", language: "English", cost: "‚Ç¨65k", costMin: 65000, costMax: 65000, classification: "Reach", fitScore: 5, citySize: "2.2M", highlights: ["Elite university", "Paris location", "Prestigious", "Competitive"], new: false, url: "https://psl.eu/en/education/undergraduate" },
            { id: 25, name: "Paris-Saclay", country: "France", program: "BSc CS + AI", language: "French/English", cost: "‚Ç¨45-50k", costMin: 45000, costMax: 50000, classification: "Match", fitScore: 4, citySize: "2.2M", highlights: ["Top research", "Paris area", "Some French needed"], new: false, url: "https://www.universite-paris-saclay.fr/en/education/undergraduate" },
            
            // AUSTRIA
            { id: 26, name: "JKU Linz", country: "Austria", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨50-55k", costMin: 50000, costMax: 55000, classification: "Match", fitScore: 5, citySize: "200k", highlights: ["First AI bachelor in Europe", "Pure AI focus", "Theory-heavy"], new: false, url: "https://www.jku.at/en/degree-programs/types-of-degree-programs/bachelors-and-diploma-programs/ba-artificial-intelligence/" },
            { id: 27, name: "University of Klagenfurt", country: "Austria", program: "BSc Robotics & AI", language: "English", cost: "‚Ç¨25-32k", costMin: 25000, costMax: 32000, classification: "Safety", fitScore: 5, citySize: "100k", highlights: ["CHEAPEST OVERALL!", "Robotics+AI combo", "Lakeside campus", "Hands-on"], new: false, url: "https://www.aau.at/en/studies/bachelor-robotics-and-artificial-intelligence/" },
            
            // ITALY
            { id: 28, name: "University of Milan", country: "Italy", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨48-52k", costMin: 48000, costMax: 52000, classification: "Match", fitScore: 4, citySize: "1.4M", highlights: ["Milan fashion capital", "English-taught", "Italian lifestyle"], new: false, url: "https://www.unimi.it/en/education/artificial-intelligence" },
            { id: 29, name: "University of Pavia", country: "Italy", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨48-52k", costMin: 48000, costMax: 52000, classification: "Match", fitScore: 4, citySize: "73k", highlights: ["Historic university", "Small city", "Near Milan"], new: false, url: "https://web.unipv.it/artificial-intelligence/" },
            { id: 30, name: "H-FARM College", country: "Italy", program: "BSc AI & Data Science", language: "English", cost: "‚Ç¨60-65k", costMin: 60000, costMax: 65000, classification: "Safety", fitScore: 3, citySize: "Venice area", highlights: ["Private", "Startup focus", "Innovation hub"], new: false, url: "https://www.h-farmcollege.com/undergraduate/artificial-intelligence-data-science/" },
            
            // SWEDEN
            { id: 31, name: "Karlstad University", country: "Sweden", program: "BSc CS (AI & ML track)", language: "English", cost: "‚Ç¨29-32k", costMin: 29000, costMax: 32000, classification: "Safety", fitScore: 4, citySize: "65k", highlights: ["Free tuition", "Small city", "Good value"], new: false, url: "https://www.kau.se/en/education/programmes-and-courses/programmes/TGKAI" },
            
            // DENMARK
            { id: 32, name: "IT University Copenhagen", country: "Denmark", program: "BSc Data Science", language: "English", cost: "‚Ç¨36-43k", costMin: 36000, costMax: 43000, classification: "Match", fitScore: 5, citySize: "600k", highlights: ["Free tuition", "Capital city", "Data Science focus", "Tech specialization"], new: false, url: "https://en.itu.dk/Programmes/BSc-Programmes/Data-Science" },
            { id: 33, name: "SDU Vejle", country: "Denmark", program: "BSc Artificial Intelligence", language: "English", cost: "‚Ç¨29-36k", costMin: 29000, costMax: 36000, classification: "Match/Safety", fitScore: 5, citySize: "60k", highlights: ["BRAND NEW 2026!", "Free tuition", "First cohort advantage", "Dedicated AI"], new: true, url: "https://www.sdu.dk/en/uddannelse/bachelor/artificial-intelligence-vejle" },
            { id: 34, name: "SDU Vejle", country: "Denmark", program: "BSc Computer Science", language: "English", cost: "‚Ç¨29-36k", costMin: 29000, costMax: 36000, classification: "Match/Safety", fitScore: 4.5, citySize: "60k", highlights: ["BRAND NEW 2026!", "Free tuition", "First cohort advantage", "Versatile CS+AI"], new: true, url: "https://www.sdu.dk/en/uddannelse/bachelor/computer-science-vejle" },
        ];

        const UniversityExplorer = () => {
            const [filters, setFilters] = useState({
                countries: [],
                classifications: [],
                languages: [],
                costRange: [0, 120000],
                minFitScore: 0,
                searchTerm: ''
            });
            
            const [sortBy, setSortBy] = useState('cost');
            const [compareMode, setCompareMode] = useState(false);
            const [selectedForComparison, setSelectedForComparison] = useState([]);
            const [viewMode, setViewMode] = useState('cards'); // cards or table

            const countries = [...new Set(universities.map(u => u.country))].sort();
            const classifications = ['Safety', 'Match', 'Reach'];
            const languages = [...new Set(universities.map(u => u.language))].sort();

            const filteredAndSorted = useMemo(() => {
                let filtered = universities.filter(uni => {
                    // Country filter
                    if (filters.countries.length > 0 && !filters.countries.includes(uni.country)) {
                        return false;
                    }
                    
                    // Classification filter
                    if (filters.classifications.length > 0) {
                        const matchesClassification = filters.classifications.some(c => 
                            uni.classification.includes(c)
                        );
                        if (!matchesClassification) return false;
                    }
                    
                    // Language filter
                    if (filters.languages.length > 0 && !filters.languages.includes(uni.language)) {
                        return false;
                    }
                    
                    // Cost range filter
                    if (uni.costMin > filters.costRange[1] || uni.costMax < filters.costRange[0]) {
                        return false;
                    }
                    
                    // Fit score filter
                    if (uni.fitScore < filters.minFitScore) {
                        return false;
                    }
                    
                    // Search term
                    if (filters.searchTerm) {
                        const searchLower = filters.searchTerm.toLowerCase();
                        return uni.name.toLowerCase().includes(searchLower) ||
                               uni.program.toLowerCase().includes(searchLower) ||
                               uni.country.toLowerCase().includes(searchLower);
                    }
                    
                    return true;
                });

                // Sort
                filtered.sort((a, b) => {
                    switch(sortBy) {
                        case 'cost':
                            return a.costMin - b.costMin;
                        case 'fitScore':
                            return b.fitScore - a.fitScore;
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'country':
                            return a.country.localeCompare(b.country);
                        default:
                            return 0;
                    }
                });

                return filtered;
            }, [filters, sortBy]);

            const toggleFilter = (filterType, value) => {
                setFilters(prev => ({
                    ...prev,
                    [filterType]: prev[filterType].includes(value)
                        ? prev[filterType].filter(v => v !== value)
                        : [...prev[filterType], value]
                }));
            };

            const clearFilters = () => {
                setFilters({
                    countries: [],
                    classifications: [],
                    languages: [],
                    costRange: [0, 120000],
                    minFitScore: 0,
                    searchTerm: ''
                });
            };

            const toggleComparison = (uni) => {
                if (selectedForComparison.find(u => u.id === uni.id)) {
                    setSelectedForComparison(selectedForComparison.filter(u => u.id !== uni.id));
                } else if (selectedForComparison.length < 4) {
                    setSelectedForComparison([...selectedForComparison, uni]);
                }
            };

            const getClassificationColor = (classification) => {
                if (classification.includes('Safety')) return 'bg-green-100 text-green-800 border-green-300';
                if (classification.includes('Match')) return 'bg-blue-100 text-blue-800 border-blue-300';
                if (classification.includes('Reach')) return 'bg-purple-100 text-purple-800 border-purple-300';
                return 'bg-gray-100 text-gray-800 border-gray-300';
            };

            const getClassificationBadgeColor = (classification) => {
                if (classification.includes('Safety')) return 'bg-green-500';
                if (classification.includes('Match')) return 'bg-blue-500';
                if (classification.includes('Reach')) return 'bg-purple-500';
                return 'bg-gray-500';
            };

            const stats = {
                total: universities.length,
                safety: universities.filter(u => u.classification.includes('Safety')).length,
                match: universities.filter(u => u.classification.includes('Match')).length,
                reach: universities.filter(u => u.classification.includes('Reach')).length,
                avgCost: Math.round(universities.reduce((sum, u) => sum + u.costMin, 0) / universities.length),
                cheapest: Math.min(...universities.map(u => u.costMin)),
                englishTaught: universities.filter(u => u.language === 'English').length
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
                    {/* Header */}
                    <div className="bg-white shadow-lg border-b-4 border-indigo-500">
                        <div className="max-w-7xl mx-auto px-4 py-6">
                            <h1 className="text-4xl font-bold text-gray-900 mb-2">
                                üéì University Shortlist Explorer
                            </h1>
                            <p className="text-gray-600 text-lg">
                                AI, Data Science & Computer Science Bachelor's Programs in Europe
                            </p>
                            
                            {/* Quick Stats */}
                            <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 mt-6">
                                <div className="bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">{stats.total}</div>
                                    <div className="text-xs opacity-90">Universities</div>
                                </div>
                                <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">{stats.safety}</div>
                                    <div className="text-xs opacity-90">Safety</div>
                                </div>
                                <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">{stats.match}</div>
                                    <div className="text-xs opacity-90">Match</div>
                                </div>
                                <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">{stats.reach}</div>
                                    <div className="text-xs opacity-90">Reach</div>
                                </div>
                                <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">{stats.englishTaught}</div>
                                    <div className="text-xs opacity-90">English-taught</div>
                                </div>
                                <div className="bg-gradient-to-br from-teal-500 to-teal-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">‚Ç¨{Math.round(stats.cheapest/1000)}k</div>
                                    <div className="text-xs opacity-90">Cheapest</div>
                                </div>
                                <div className="bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg p-3 text-white">
                                    <div className="text-2xl font-bold">‚Ç¨{Math.round(stats.avgCost/1000)}k</div>
                                    <div className="text-xs opacity-90">Avg Cost</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 py-6">
                        {/* Controls */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            {/* Search and View Toggle */}
                            <div className="flex flex-col md:flex-row gap-4 mb-6">
                                <input
                                    type="text"
                                    placeholder="üîç Search universities, programs, countries..."
                                    value={filters.searchTerm}
                                    onChange={(e) => setFilters({...filters, searchTerm: e.target.value})}
                                    className="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                />
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setViewMode(viewMode === 'cards' ? 'table' : 'cards')}
                                        className="px-4 py-3 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 font-medium"
                                    >
                                        {viewMode === 'cards' ? 'üìä Table View' : 'üìã Card View'}
                                    </button>
                                    <button
                                        onClick={() => setCompareMode(!compareMode)}
                                        className={`px-4 py-3 rounded-lg font-medium ${
                                            compareMode 
                                                ? 'bg-purple-500 text-white' 
                                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        ‚öñÔ∏è Compare ({selectedForComparison.length}/4)
                                    </button>
                                </div>
                            </div>

                            {/* Filters */}
                            <div className="grid md:grid-cols-3 gap-6">
                                {/* Country Filter */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Countries</label>
                                    <div className="flex flex-wrap gap-2">
                                        {countries.map(country => (
                                            <button
                                                key={country}
                                                onClick={() => toggleFilter('countries', country)}
                                                className={`px-3 py-1 rounded-full text-sm font-medium transition-all ${
                                                    filters.countries.includes(country)
                                                        ? 'bg-indigo-500 text-white shadow-md'
                                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                                }`}
                                            >
                                                {country}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Classification Filter */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Classification</label>
                                    <div className="flex flex-wrap gap-2">
                                        {classifications.map(classification => (
                                            <button
                                                key={classification}
                                                onClick={() => toggleFilter('classifications', classification)}
                                                className={`px-3 py-1 rounded-full text-sm font-medium transition-all ${
                                                    filters.classifications.includes(classification)
                                                        ? classification === 'Safety' 
                                                            ? 'bg-green-500 text-white shadow-md'
                                                            : classification === 'Match'
                                                            ? 'bg-blue-500 text-white shadow-md'
                                                            : 'bg-purple-500 text-white shadow-md'
                                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                                }`}
                                            >
                                                {classification}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Language Filter */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Language</label>
                                    <div className="flex flex-wrap gap-2">
                                        {languages.map(language => (
                                            <button
                                                key={language}
                                                onClick={() => toggleFilter('languages', language)}
                                                className={`px-3 py-1 rounded-full text-sm font-medium transition-all ${
                                                    filters.languages.includes(language)
                                                        ? 'bg-indigo-500 text-white shadow-md'
                                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                                }`}
                                            >
                                                {language}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Cost Range and Fit Score */}
                            <div className="grid md:grid-cols-2 gap-6 mt-6">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Cost Range: ‚Ç¨{Math.round(filters.costRange[0]/1000)}k - ‚Ç¨{Math.round(filters.costRange[1]/1000)}k
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="120000"
                                        step="5000"
                                        value={filters.costRange[1]}
                                        onChange={(e) => setFilters({...filters, costRange: [0, parseInt(e.target.value)]})}
                                        className="w-full"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Min Fit Score: {filters.minFitScore}/5 ‚≠ê
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="5"
                                        step="0.5"
                                        value={filters.minFitScore}
                                        onChange={(e) => setFilters({...filters, minFitScore: parseFloat(e.target.value)})}
                                        className="w-full"
                                    />
                                </div>
                            </div>

                            {/* Sort and Clear */}
                            <div className="flex flex-wrap gap-4 mt-6 pt-6 border-t">
                                <div className="flex items-center gap-2">
                                    <label className="text-sm font-semibold text-gray-700">Sort by:</label>
                                    <select
                                        value={sortBy}
                                        onChange={(e) => setSortBy(e.target.value)}
                                        className="px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-indigo-500"
                                    >
                                        <option value="cost">Cost (Low to High)</option>
                                        <option value="fitScore">Fit Score (High to Low)</option>
                                        <option value="name">Name (A-Z)</option>
                                        <option value="country">Country (A-Z)</option>
                                    </select>
                                </div>
                                <button
                                    onClick={clearFilters}
                                    className="px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium"
                                >
                                    üîÑ Clear All Filters
                                </button>
                                <div className="ml-auto text-sm text-gray-600 py-2">
                                    Showing {filteredAndSorted.length} of {universities.length} universities
                                </div>
                            </div>
                        </div>

                        {/* Comparison View */}
                        {compareMode && selectedForComparison.length > 0 && (
                            <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-bold text-gray-900">‚öñÔ∏è Comparison</h2>
                                    <button
                                        onClick={() => setSelectedForComparison([])}
                                        className="px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200"
                                    >
                                        Clear Selection
                                    </button>
                                </div>
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="border-b-2">
                                                <th className="text-left p-3 font-semibold">Feature</th>
                                                {selectedForComparison.map(uni => (
                                                    <th key={uni.id} className="text-left p-3 font-semibold">{uni.name}</th>
                                                ))}
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y">
                                            <tr>
                                                <td className="p-3 font-medium">Program</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">{uni.program}</td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Country</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">{uni.country}</td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Cost</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3 font-semibold text-green-600">{uni.cost}</td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Classification</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getClassificationColor(uni.classification)}`}>
                                                            {uni.classification}
                                                        </span>
                                                    </td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Fit Score</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">
                                                        {'‚≠ê'.repeat(Math.floor(uni.fitScore))} {uni.fitScore}/5
                                                    </td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Language</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">{uni.language}</td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">City Size</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">{uni.citySize}</td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium align-top">Highlights</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">
                                                        <ul className="list-disc list-inside text-sm space-y-1">
                                                            {uni.highlights.map((h, i) => (
                                                                <li key={i}>{h}</li>
                                                            ))}
                                                        </ul>
                                                    </td>
                                                ))}
                                            </tr>
                                            <tr>
                                                <td className="p-3 font-medium">Website</td>
                                                {selectedForComparison.map(uni => (
                                                    <td key={uni.id} className="p-3">
                                                        <a
                                                            href={uni.url}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className="inline-flex items-center gap-1 px-3 py-2 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600 transition-all"
                                                        >
                                                            üîó Visit Program
                                                        </a>
                                                    </td>
                                                ))}
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {/* Results */}
                        {viewMode === 'cards' ? (
                            // Card View
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredAndSorted.map(uni => (
                                    <div
                                        key={uni.id}
                                        className={`bg-white rounded-lg shadow-lg overflow-hidden border-2 transition-all hover:shadow-xl ${
                                            uni.new ? 'border-orange-400' : 'border-transparent'
                                        } ${
                                            selectedForComparison.find(u => u.id === uni.id) 
                                                ? 'ring-4 ring-purple-300' 
                                                : ''
                                        }`}
                                    >
                                        {/* Header with Classification */}
                                        <div className={`p-4 border-b-4 ${getClassificationColor(uni.classification)}`}>
                                            <div className="flex justify-between items-start mb-2">
                                                <h3 className="font-bold text-lg leading-tight">{uni.name}</h3>
                                                {uni.new && (
                                                    <span className="bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold animate-pulse">
                                                        NEW!
                                                    </span>
                                                )}
                                            </div>
                                            <div className="flex items-center gap-2 text-sm">
                                                <span className="font-semibold">{uni.country}</span>
                                                <span className="text-gray-400">‚Ä¢</span>
                                                <span>{uni.citySize}</span>
                                            </div>
                                        </div>

                                        {/* Content */}
                                        <div className="p-4 space-y-3">
                                            <div>
                                                <div className="text-sm font-semibold text-gray-500 mb-1">Program</div>
                                                <div className="font-medium">{uni.program}</div>
                                            </div>

                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <div className="text-sm font-semibold text-gray-500">Language</div>
                                                    <div className="font-medium">{uni.language}</div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="text-sm font-semibold text-gray-500">Fit Score</div>
                                                    <div className="font-bold text-lg">
                                                        {'‚≠ê'.repeat(Math.floor(uni.fitScore))} {uni.fitScore}
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div className="text-sm font-semibold text-gray-500 mb-1">Total Cost (3 years)</div>
                                                <div className="text-2xl font-bold text-green-600">{uni.cost}</div>
                                            </div>

                                            <div>
                                                <div className="text-sm font-semibold text-gray-500 mb-2">Highlights</div>
                                                <div className="space-y-1">
                                                    {uni.highlights.slice(0, 3).map((highlight, idx) => (
                                                        <div key={idx} className="text-sm flex items-start gap-2">
                                                            <span className="text-green-500 mt-0.5">‚úì</span>
                                                            <span>{highlight}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>

                                        {/* Footer */}
                                        <div className="p-4 bg-gray-50 border-t space-y-2">
                                            <a
                                                href={uni.url}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                className="block w-full py-2 px-4 bg-indigo-500 text-white text-center rounded-lg font-medium hover:bg-indigo-600 transition-all"
                                            >
                                                üîó Visit Program Website
                                            </a>
                                            {compareMode && (
                                                <button
                                                    onClick={() => toggleComparison(uni)}
                                                    disabled={selectedForComparison.length >= 4 && !selectedForComparison.find(u => u.id === uni.id)}
                                                    className={`w-full py-2 rounded-lg font-medium transition-all ${
                                                        selectedForComparison.find(u => u.id === uni.id)
                                                            ? 'bg-purple-500 text-white hover:bg-purple-600'
                                                            : selectedForComparison.length >= 4
                                                            ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                                            : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200'
                                                    }`}
                                                >
                                                    {selectedForComparison.find(u => u.id === uni.id) 
                                                        ? '‚úì Selected for Comparison' 
                                                        : '+ Add to Comparison'}
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        ) : (
                            // Table View
                            <div className="bg-white rounded-lg shadow-lg overflow-hidden">
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead className="bg-gray-50 border-b-2">
                                            <tr>
                                                {compareMode && <th className="p-3 text-left">Compare</th>}
                                                <th className="p-3 text-left font-semibold">University</th>
                                                <th className="p-3 text-left font-semibold">Program</th>
                                                <th className="p-3 text-left font-semibold">Country</th>
                                                <th className="p-3 text-left font-semibold">Cost</th>
                                                <th className="p-3 text-left font-semibold">Classification</th>
                                                <th className="p-3 text-left font-semibold">Fit</th>
                                                <th className="p-3 text-left font-semibold">Language</th>
                                                <th className="p-3 text-left font-semibold">Website</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y">
                                            {filteredAndSorted.map(uni => (
                                                <tr key={uni.id} className="hover:bg-gray-50">
                                                    {compareMode && (
                                                        <td className="p-3">
                                                            <input
                                                                type="checkbox"
                                                                checked={!!selectedForComparison.find(u => u.id === uni.id)}
                                                                onChange={() => toggleComparison(uni)}
                                                                disabled={selectedForComparison.length >= 4 && !selectedForComparison.find(u => u.id === uni.id)}
                                                                className="w-5 h-5"
                                                            />
                                                        </td>
                                                    )}
                                                    <td className="p-3">
                                                        <div className="font-semibold">{uni.name}</div>
                                                        {uni.new && (
                                                            <span className="inline-block mt-1 bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full">
                                                                NEW 2026!
                                                            </span>
                                                        )}
                                                    </td>
                                                    <td className="p-3 text-sm">{uni.program}</td>
                                                    <td className="p-3 font-medium">{uni.country}</td>
                                                    <td className="p-3 font-bold text-green-600">{uni.cost}</td>
                                                    <td className="p-3">
                                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getClassificationColor(uni.classification)}`}>
                                                            {uni.classification}
                                                        </span>
                                                    </td>
                                                    <td className="p-3">
                                                        {'‚≠ê'.repeat(Math.floor(uni.fitScore))} {uni.fitScore}
                                                    </td>
                                                    <td className="p-3 text-sm">{uni.language}</td>
                                                    <td className="p-3">
                                                        <a
                                                            href={uni.url}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className="inline-flex items-center gap-1 px-3 py-1 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600 transition-all"
                                                        >
                                                            üîó Visit
                                                        </a>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {filteredAndSorted.length === 0 && (
                            <div className="bg-white rounded-lg shadow-lg p-12 text-center">
                                <div className="text-6xl mb-4">üîç</div>
                                <h3 className="text-2xl font-bold text-gray-800 mb-2">No universities match your filters</h3>
                                <p className="text-gray-600 mb-6">Try adjusting your filters to see more options</p>
                                <button
                                    onClick={clearFilters}
                                    className="px-6 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 font-medium"
                                >
                                    Clear All Filters
                                </button>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <div className="bg-white border-t mt-12 py-6">
                        <div className="max-w-7xl mx-auto px-4 text-center text-gray-600">
                            <p className="font-medium">
                                Good luck with your applications, Sophia! üçÄ
                            </p>
                            <p className="text-sm mt-2">
                                Your EU citizenship + C1 Spanish + trilingual skills = amazing opportunities across Europe! üåç
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<UniversityExplorer />, document.getElementById('root'));
    </script>
</body>
</html>
